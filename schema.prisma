// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "postgresql"
}

generator client {
  provider = "prisma-client-js"
  output   = "node_modules/.prisma/client"
}

model User {
  id                        String               @id @default(cuid())
  idNo                      Int                  @unique @default(autoincrement())
  dealerId                  String               @default("")
  firstName                 String               @default("")
  lastName                  String               @default("")
  email                     String               @default("")
  username                  String               @unique @default("")
  phone                     String               @default("")
  businessName              String               @default("")
  category                  EventType[]          @relation("EventType_users")
  mobile                    String               @unique @default("")
  password                  String?
  vehicleBuyingLimit        Int?                 @default(0)
  specialVehicleBuyingLimit Int?                 @default(0)
  image_filesize            Int?
  image_extension           String?
  image_width               Int?
  image_height              Int?
  image_id                  String?
  pancard_filesize          Int?
  pancard_extension         String?
  pancard_width             Int?
  pancard_height            Int?
  pancard_id                String?
  pancardNo                 String               @default("")
  idProof_filesize          Int?
  idProof_extension         String?
  idProof_width             Int?
  idProof_height            Int?
  idProof_id                String?
  idProofBack_filesize      Int?
  idProofBack_extension     String?
  idProofBack_width         Int?
  idProofBack_height        Int?
  idProofBack_id            String?
  idProofType               UserIdProofTypeType?
  idProofNo                 String               @default("")
  dealership_filesize       Int?
  dealership_extension      String?
  dealership_width          Int?
  dealership_height         Int?
  dealership_id             String?
  country                   String               @default("")
  city                      String               @default("")
  role                      UserRoleType?        @default(dealer)
  watchList                 Vehicle[]            @relation("User_watchList")
  emdUpdates                EmdUpdate[]          @relation("EmdUpdate_user")
  payments                  Payment[]            @relation("Payment_user")
  emdUpdatesByAdmin         EmdUpdate[]          @relation("EmdUpdate_createdBy")
  paymentByAdmin            Payment?             @relation("Payment_createdBy")
  status                    UserStatusType?      @default(pending)
  state                     String               @default("")
  states                    State[]              @relation("State_users")
  activeBids                Vehicle[]            @relation("Vehicle_currentBidUser")
  quotedBids                Bid[]                @relation("Bid_user")
  bannedSellers             Seller[]             @relation("Seller_bannedUsers")
  coupenDetail              Coupen[]             @relation("Coupen_userDetail")
  eventDetail               Event[]              @relation("Event_participants")
  workSheetDetail           WorkSheet[]          @relation("WorkSheet_userDetail")
  deletedBid                DeletedBid[]         @relation("DeletedBid_user")
  sellACar                  SellACar[]           @relation("SellACar_user")
  notification              Notification[]       @relation("Notification_user")
  userCategory              String               @default("")
  tempToken                 Int?                 @unique
  createdAt                 DateTime?            @default(now())
  updatedAt                 DateTime?            @updatedAt
  magicAuthToken            String?
  magicAuthIssuedAt         DateTime?
  magicAuthRedeemedAt       DateTime?
}

model Payment {
  id                 String      @id @default(cuid())
  refNo              Int         @default(autoincrement())
  amount             Int?        @default(10000)
  paymentFor         String
  description        String      @default("")
  status             String?     @default("pending")
  user               User?       @relation("Payment_user", fields: [userId], references: [id])
  userId             String?     @map("user")
  image_filesize     Int?
  image_extension    String?
  image_width        Int?
  image_height       Int?
  image_id           String?
  emdUpdate          EmdUpdate[] @relation("EmdUpdate_payment")
  coupenDetail       Coupen[]    @relation("Coupen_paymentDetail")
  createdAt          DateTime?   @default(now())
  createdBy          User?       @relation("Payment_createdBy", fields: [createdById], references: [id])
  createdById        String?     @unique @map("createdBy")
  updatedAt          DateTime?   @updatedAt
  RegistrationExpire DateTime?

  @@index([refNo])
  @@index([userId])
}

model EmdUpdate {
  id                                 String    @id @default(cuid())
  emdNo                              Int       @default(autoincrement())
  vehicleBuyingLimitIncrement        Int?      @default(1)
  specialVehicleBuyingLimitIncrement Int?      @default(0)
  payment                            Payment?  @relation("EmdUpdate_payment", fields: [paymentId], references: [id])
  paymentId                          String?   @map("payment")
  user                               User?     @relation("EmdUpdate_user", fields: [userId], references: [id])
  userId                             String?   @map("user")
  createdAt                          DateTime? @default(now())
  updatedAt                          DateTime? @updatedAt
  createdBy                          User?     @relation("EmdUpdate_createdBy", fields: [createdById], references: [id])
  createdById                        String?   @map("createdBy")

  @@index([emdNo])
  @@index([paymentId])
  @@index([userId])
  @@index([createdById])
}

model Event {
  id                        String              @id @default(cuid())
  eventNo                   Int                 @default(autoincrement())
  eventCategory             String?
  startDate                 DateTime
  endDate                   DateTime
  pauseDate                 DateTime?
  pausedTotalTime           Int?                @default(0)
  seller                    Seller?             @relation("Event_seller", fields: [sellerId], references: [id])
  sellerId                  String?             @map("seller")
  eventType                 EventType[]         @relation("Event_eventType")
  location                  Location?           @relation("Event_location", fields: [locationId], references: [id])
  locationId                String?             @map("location")
  vehicles                  Vehicle[]           @relation("Vehicle_event")
  noOfBids                  Int
  participants              User[]              @relation("Event_participants")
  status                    EventStatusType?    @default(active)
  ExcelFile                 ExcelUpload?        @relation("Event_ExcelFile", fields: [ExcelFileId], references: [id])
  ExcelFileId               String?             @unique @map("ExcelFile")
  downloadableFile_filesize Int?
  downloadableFile_filename String?
  termsAndConditions        String              @default("")
  createdAt                 DateTime?           @default(now())
  updatedAt                 DateTime?           @updatedAt
  bidLock                   EventBidLockType?   @default(unlocked)
  isSpecialEvent            Boolean             @default(false)
  extraTimeTrigerIn         Int?                @default(2)
  extraTime                 Int?                @default(2)
  vehicleLiveTimeIn         Int?                @default(0)
  gapInBetweenVehicles      Int?                @default(0)
  eventName                 EventEventNameType? @default(stock)

  @@index([eventNo])
  @@index([sellerId])
  @@index([locationId])
}

model Vehicle {
  id                     String                @id @default(cuid())
  vehicleIndexNo         Int                   @default(autoincrement())
  registrationNumber     String                @default("")
  bidTimeExpire          DateTime
  bidStartTime           DateTime
  bidAmountUpdate        Int?
  currentBidAmount       Int?                  @default(0)
  startBidAmount         Float?                @default(0)
  currentBidUser         User?                 @relation("Vehicle_currentBidUser", fields: [currentBidUserId], references: [id])
  currentBidUserId       String?               @map("currentBidUser")
  event                  Event?                @relation("Vehicle_event", fields: [eventId], references: [id])
  eventId                String?               @map("event")
  bidStatus              VehicleBidStatusType? @default(pending)
  userVehicleBids        Bid[]                 @relation("Bid_bidVehicle")
  loanAgreementNo        String                @default("")
  registeredOwnerName    String                @default("")
  quoteIncreament        Int?                  @default(1000)
  make                   String                @default("")
  model                  String                @default("")
  varient                String                @default("")
  categoty               String                @default("")
  fuel                   String                @default("")
  type                   String                @default("")
  rcStatus               String                @default("")
  yearOfManufacture      Int?
  ownership              Int?
  mileage                Int?
  kmReading              Int?                  @default(0)
  insuranceStatus        String                @default("")
  yardLocation           String                @default("")
  startPrice             Float?                @default(0)
  reservePrice           Float?                @default(0)
  repoDt                 DateTime?
  veicleLocation         String                @default("")
  vehicleRemarks         String                @default("")
  auctionManager         String                @default("")
  parkingCharges         String                @default("")
  insurance              String                @default("")
  insuranceValidTill     DateTime?
  tax                    String                @default("")
  taxValidityDate        DateTime?
  fitness                String                @default("")
  permit                 String                @default("")
  fitnessPermit          String                @default("")
  engineNo               String                @default("")
  chassisNo              String                @default("")
  frontImage             String                @default("")
  backImage              String                @default("")
  leftImage              String                @default("")
  rightImage             String                @default("")
  image5                 String                @default("")
  image6                 String                @default("")
  inspectionLink         String                @default("")
  autobseContact         String                @default("")
  autobse_contact_person String                @default("")
  vehicleCondition       String                @default("")
  powerSteering          String                @default("")
  shape                  String                @default("")
  color                  String                @default("")
  state                  String                @default("")
  city                   String                @default("")
  area                   String                @default("")
  paymentTerms           String                @default("")
  dateOfRegistration     DateTime?
  hypothication          String                @default("")
  climateControl         String                @default("")
  doorCount              Int?
  gearBox                String                @default("")
  buyerFees              String                @default("")
  rtoFine                String                @default("")
  parkingRate            String                @default("")
  approxParkingCharges   String                @default("")
  clientContactPerson    String                @default("")
  clientContactNo        String                @default("")
  additionalRemarks      String                @default("")
  watchedBy              User[]                @relation("User_watchList")
  ExcelFile              ExcelUpload?          @relation("Vehicle_ExcelFile", fields: [ExcelFileId], references: [id])
  ExcelFileId            String?               @map("ExcelFile")
  coupenDetail           Coupen?               @relation("Coupen_vehicleDetail")
  deletedBid             DeletedBid[]          @relation("DeletedBid_deletedbidVehicle")
  createdAt              DateTime?             @default(now())
  updatedAt              DateTime?             @updatedAt

  @@index([vehicleIndexNo])
  @@index([registrationNumber])
  @@index([currentBidUserId])
  @@index([eventId])
  @@index([ExcelFileId])
}

model Bid {
  id           String       @id @default(cuid())
  name         String       @default("")
  amount       Int?
  user         User?        @relation("Bid_user", fields: [userId], references: [id])
  userId       String?      @map("user")
  bidVehicle   Vehicle?     @relation("Bid_bidVehicle", fields: [bidVehicleId], references: [id])
  bidVehicleId String?      @map("bidVehicle")
  coupenDetail Coupen[]     @relation("Coupen_bidDetail")
  deletedBid   DeletedBid[] @relation("Bid_deletedBid")
  createdAt    DateTime?    @default(now())
  updatedAt    DateTime?    @updatedAt

  @@index([userId])
  @@index([bidVehicleId])
}

model EventType {
  id        String    @id @default(cuid())
  name      String    @default("")
  events    Event[]   @relation("Event_eventType")
  users     User?     @relation("EventType_users", fields: [usersId], references: [id])
  usersId   String?   @map("users")
  seller    Seller[]  @relation("EventType_seller")
  createdAt DateTime? @default(now())
  updatedAt DateTime? @updatedAt

  @@index([usersId])
}

model Location {
  id        String    @id @default(cuid())
  name      String    @default("")
  country   String    @default("")
  state     State?    @relation("Location_state", fields: [stateId], references: [id])
  stateId   String?   @map("state")
  city      String    @default("")
  events    Event[]   @relation("Event_location")
  createdAt DateTime? @default(now())
  updatedAt DateTime? @updatedAt

  @@index([stateId])
}

model State {
  id                 String        @id @default(cuid())
  name               String        @default("")
  users              User[]        @relation("State_users")
  locations          Location[]    @relation("Location_state")
  find_auction_state FindAuction[] @relation("FindAuction_state")
  createdAt          DateTime?     @default(now())
  updatedAt          DateTime?     @updatedAt
}

model ExcelUpload {
  id            String    @id @default(cuid())
  name          String    @default("")
  file_filesize Int?
  file_filename String?
  event         Event?    @relation("Event_ExcelFile")
  vehicles      Vehicle[] @relation("Vehicle_ExcelFile")
  createdAt     DateTime? @default(now())
  updatedAt     DateTime? @updatedAt
}

model Seller {
  id                   String      @id @default(cuid())
  name                 String      @default("")
  contactPerson        String      @default("")
  GSTNumbber           String      @default("")
  billingContactPerson String      @default("")
  mobile               String      @default("")
  nationalHead         String      @default("")
  vehicleCategory      EventType[] @relation("EventType_seller")
  events               Event[]     @relation("Event_seller")
  bannedUsers          User[]      @relation("Seller_bannedUsers")
  logo                 String      @default("")
  createdAt            DateTime?   @default(now())
  updatedAt            DateTime?   @updatedAt
}

model ContactUs {
  id        String               @id @default(cuid())
  firstName String               @default("")
  lastName  String               @default("")
  mobile    String               @default("")
  state     String               @default("")
  subject   String               @default("")
  message   String               @default("")
  status    ContactUsStatusType? @default(created)
  createdAt DateTime?            @default(now())
  updatedAt DateTime?            @updatedAt
}

model Coupen {
  id              String                  @id @default(cuid())
  paymentDetail   Payment?                @relation("Coupen_paymentDetail", fields: [paymentDetailId], references: [id])
  paymentDetailId String?                 @map("paymentDetail")
  coupenNumber    String                  @unique @default("")
  userDetail      User?                   @relation("Coupen_userDetail", fields: [userDetailId], references: [id])
  userDetailId    String?                 @map("userDetail")
  vehicleDetail   Vehicle?                @relation("Coupen_vehicleDetail", fields: [vehicleDetailId], references: [id])
  vehicleDetailId String?                 @unique @map("vehicleDetail")
  bidDetail       Bid?                    @relation("Coupen_bidDetail", fields: [bidDetailId], references: [id])
  bidDetailId     String?                 @map("bidDetail")
  coupenStatus    CoupenCoupenStatusType? @default(unclaimed)
  createdAt       DateTime?               @default(now())
  updatedAt       DateTime?               @updatedAt

  @@index([paymentDetailId])
  @@index([userDetailId])
  @@index([bidDetailId])
}

model WorkSheet {
  id                 String    @id @default(cuid())
  registrationNumber String    @default("")
  make               String    @default("")
  model              String    @default("")
  chassis            String    @default("")
  engineNo           String    @default("")
  vehicleCondition   String    @default("")
  image1             String    @default("")
  image2             String    @default("")
  image3             String    @default("")
  image4             String    @default("")
  image5             String    @default("")
  voiceRecordUrl     String    @default("")
  videoUrl           String    @default("")
  varient            String    @default("")
  userDetail         User?     @relation("WorkSheet_userDetail", fields: [userDetailId], references: [id])
  userDetailId       String?   @map("userDetail")
  createdAt          DateTime? @default(now())
  updatedAt          DateTime? @updatedAt

  @@index([userDetailId])
}

model FindAuction {
  id                    String                       @id @default(cuid())
  listingId             Int                          @default(autoincrement())
  emdAmount             BigInt?
  city                  String                       @default("")
  reservePrice          BigInt?
  emdSubmissionDate     DateTime?
  auctionStartDate      DateTime?
  auctionEndDate        DateTime?
  contactDetails        String                       @default("")
  address               String                       @default("")
  auctionNotice         String                       @default("")
  vehicleRegNo          String                       @default("")
  vehicleModel          String                       @default("")
  image                 String                       @default("")
  tenderDocument        String                       @default("")
  state                 State?                       @relation("FindAuction_state", fields: [stateId], references: [id])
  stateId               String?                      @map("state")
  institution_details   Institution?                 @relation("FindAuction_institution_details", fields: [institution_detailsId], references: [id])
  institution_detailsId String?                      @map("institution_details")
  propertyType          FindAuctionPropertyTypeType? @default(vehicle)
  createdAt             DateTime?                    @default(now())
  updatedAt             DateTime?                    @updatedAt

  @@index([listingId])
  @@index([stateId])
  @@index([institution_detailsId])
}

model Institution {
  id                  String        @id @default(cuid())
  name                String        @default("")
  findAuction_details FindAuction[] @relation("FindAuction_institution_details")
  createdAt           DateTime?     @default(now())
  updatedAt           DateTime?     @updatedAt
}

model SellACar {
  id                 String    @id @default(cuid())
  vehicleIndexNo     Int       @default(autoincrement())
  registrationNumber String    @default("")
  user               User?     @relation("SellACar_user", fields: [userId], references: [id])
  userId             String?   @map("user")
  make               String    @default("")
  model              String    @default("")
  varient            String    @default("")
  fuel               String    @default("")
  yearOfManufacture  Int?
  kmRead             String    @default("")
  veicleLocation     String    @default("")
  engineNo           String    @default("")
  interiorImages     String    @default("")
  exteriorImages     String    @default("")
  vehicleCondition   String    @default("")
  state              String    @default("")
  address            String    @default("")
  landmark           String    @default("")
  pincode            String    @default("")
  rtoCode            String    @default("")
  body               String    @default("")
  expectToSell       DateTime? @default(now())
  createdAt          DateTime? @default(now())
  updatedAt          DateTime? @updatedAt

  @@index([vehicleIndexNo])
  @@index([registrationNumber])
  @@index([userId])
}

model DeletedBid {
  id                  String    @id @default(cuid())
  name                String    @default("")
  deletedBidDetail    Bid[]     @relation("Bid_deletedBid")
  amount              Int?
  user                User?     @relation("DeletedBid_user", fields: [userId], references: [id])
  userId              String?   @map("user")
  deletedbidVehicle   Vehicle?  @relation("DeletedBid_deletedbidVehicle", fields: [deletedbidVehicleId], references: [id])
  deletedbidVehicleId String?   @map("deletedbidVehicle")
  createdAt           DateTime? @default(now())
  updatedAt           DateTime? @updatedAt

  @@index([userId])
  @@index([deletedbidVehicleId])
}

model Notification {
  id          String  @id @default(cuid())
  deviceToken String  @default("")
  eventId     String  @default("")
  user        User?   @relation("Notification_user", fields: [userId], references: [id])
  userId      String? @map("user")

  @@index([userId])
}

enum UserIdProofTypeType {
  aadhar
  drivingLicense
  passport
}

enum UserRoleType {
  admin
  staff
  seller
  dealer
}

enum UserStatusType {
  pending
  blocked
  active
  inactive
}

enum EventStatusType {
  pending
  blocked
  active
  inactive
  stop
  pause
}

enum EventBidLockType {
  locked
  unlocked
}

enum EventEventNameType {
  event
  stock
}

enum VehicleBidStatusType {
  pending
  approved
  fulfilled
  declined
}

enum ContactUsStatusType {
  created
  solved
}

enum CoupenCoupenStatusType {
  unclaimed
  applied
}

enum FindAuctionPropertyTypeType {
  flat
  vehicle
  mechinery
  gold
  other
}
